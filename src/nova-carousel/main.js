(function(){var e;window.Nova.Components._Switchable={props:{index:{type:Number,value:-1},count:{type:Number,value:0},loop:{type:Boolean,value:!1}},createdHandler:function(){},next:function(){var e=this.index,t=this.getNextIndex();return t!=-1?(this.switchTo(t),!0):!1},prev:function(){var e=this.index,t=this.getPrevIndex();return t!=-1?(this.switchTo(t),!0):!1},getNextIndex:function(){var e=this.index,t=-1,n=this.count;return this.loop?t=(e+1)%n:e+1<n&&(t=e+1),t},getPrevIndex:function(){var e=this.index,t=-1,n=this.count;return this.loop?t=(e+n-1)%n:e-1>=0&&(t=e-1),t},switchTo:function(e){var t=this.index;return t!=e?(this.index=e,!0):!1}},e=undefined,function(){(function(t,n){if(typeof exports=="object")module.exports=n(e);else if(typeof define=="function"&&define.amd)define("src/nova-carousel/main",["src/nova-carousel/switchable"],n);else{var r="__0",i=r.split("."),s=t;for(var o=0;o<i.length-1;o++)s[i[o]]===undefined&&(s[i[o]]={}),s=s[i[o]];s[i[i.length-1]]=n(t._1)}})(this,function(e){function t(t){return{"src/nova-carousel/switchable":e}[t]}var n=undefined;return NovaExports.__fixedUglify="script>",NovaExports.exports={stylesheet:":host{display:block;position:relative}:host .contents{height:100%;position:relative;overflow:hidden}.contents ::content>*{position:absolute;width:100%;height:100%;top:0;left:0;box-sizing:border-box;-webkit-box-sizing:border-box;visibility:hidden;overflow:hidden}.contents ::content>.active{visibility:visible;z-index:1}:host[default-style]{height:300px}:host[default-style] .controls{position:absolute;z-index:5;text-align:center;line-height:30px;bottom:0;left:0;width:100%}:host[default-style] .controls span{display:inline-block;margin:0 5px;width:10px;height:10px;border-radius:5px;background:rgba(0,0,0,.45)}:host[default-style] .controls span.current{background:#fff}",template:'\n        <div class="controls"></div>\n        <div class="contents">\n            <content></content>\n        </div>\n    '},function(){var e=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||e.OLink===""&&["","o"])[1],n="WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1];return{dom:n,lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),t=25,n=200,r=e.css+"transform";Nova.Components.NovaCarousel=NovaExports({is:"nova-carousel",behaviors:[window.Nova.Components._Switchable],props:{index:{type:Number,value:0},loop:{type:Boolean,value:!0},durationMs:{type:Number,value:200},autoplay:{type:Boolean,value:!1},autoplayIntervalMs:{type:Number,value:1e4},swipable:{type:Boolean,value:!0},direction:{type:String,value:"horizontal"},currentClassName:{type:String,value:"current"},eles:{type:Object,value:function(){return{before:null,middle:null,after:null,control:null}}}},createdHandler:function(){var e=this;e.$=$(e),e.on("_indexChanged",e._onChangeIndex),e.on("_elesChanged",e._onChangeEles),e.on("_autoplayChanged",e._onChangeAutoplay),e._onChangeAutoplay(null,!this.autoplay,this.autoplay),e.before("prev",e._beforePrev),e.before("next",e._beforeNext)},attachedHandler:function(){var e=this;e.contItems=e.$.children(".contents").children(),e._initControls(),e.slideDir=e.direction=="vertical"?1:-1,e.dirLength=e._getSlideLength(),e.count=e.contItems.length,e.count<=1&&(e.loop=!1,e.swipable=!1),this.trigger("_indexChanged",[this.index,this.index]),this.swipable&&this._initSwipe(e.contItems.parent()),this._bindResizeHandler()},refresh:function(){this.dirLength=this._getSlideLength(),this._placeTo(this.eles.before,-this.dirLength),this._placeTo(this.eles.after,this.dirLength)},_initControls:function(){var e=this,t=e.contItems.length,n=e.$.children(".controls");for(var r=0;r<t;r++){var i=$('<span class="nova-carousel"></span>');n.append(i)}e.controlItems=e.$.children(".controls").children(),e.controlItems.on("tap",function(){e._controlTapHandler.apply(e,arguments)})},_getSlideLength:function(){return this.slideDir==-1?this.contItems.parent().width():this.contItems.parent().height()},_initSwipe:function(e){function p(e){var t=e.touches[0];a=t.pageX-o,f=t.pageY-u,l==undefined&&(l=Math.abs(f)>Math.abs(a)?1:-1);if(r.slideDir+l==0)return;h||(i.off("touchmove"),i.on("touchmove",p),i.on("touchend",d),i.on("touchcancel",d),h=!0),e.preventDefault(),r.trigger("swipemove",[r.slideDir==-1?a:f])}function d(e){r.autoplay=c;if(r.slideDir+l==0)return;r.trigger("swipeend",[r.slideDir==-1?a:f]),i.off("touchmove",p),i.off("touchend",d)}var r=this,i=$(document.body),s,o,u,a,f,l,c,h;e.on("touchstart",function(e){c=r.autoplay,h=!1,i.off("touchmove",p),i.off("touchend",d),i.off("touchcancel",d),s=e.touches[0],o=s.pageX,u=s.pageY,a=0,f=0,l=undefined,i.on("touchmove",p),i.on("touchend",d),i.on("touchcancel",d),r.trigger("swipestart")}),this.on("swipestart",function(){r.autoplay=!1}),this.on("swipemove",function(e,t){if(this.sliding)return;var n=t>0?this.eles.after:this.eles.before,r=t>0?this.eles.before:this.eles.after,i=t>0?this.dirLength:-this.dirLength,s=t>0?-this.dirLength:this.dirLength;!r[0]&&t!=0&&(t/=3),r.css(this._getOffsetCss(t+s)),n[0]!=r[0]&&n.css(this._getOffsetCss(i)),this.eles.middle.css(this._getOffsetCss(t))}),this.on("swipeend",function(e,i){if(this.sliding)return;var s=!1;Math.abs(i)>t?s=i>0?!this.prev():!this.next():s=!0;if(s){var o=i>0?this.eles.before:this.eles.after,u=i>0?-this.dirLength:this.dirLength;r.eles.middle.animate(r._getOffsetCss(0),n,"ease"),o.animate(r._getOffsetCss(u),n,"ease")}})},_bindResizeHandler:function(){var e=this;$(window).on("resize",function(){e.refresh()})},_controlTapHandler:function(e){if(this.sliding)return;var t=this.index,n=this.controlItems.index(e.currentTarget);n!=t&&(this._dir=n>t?1:-1);var r=this.autoplay;this.autoplay=!1,this.switchTo(n),this.autoplay=r},_beforePrev:function(){this._dir=-1},_beforeNext:function(){this._dir=1},_onChangeIndex:function(e,t,n){this.trigger("beforeSwitch",[n,t]);var r=this.getPrevIndex(),i=this.getNextIndex();this.eles={before:r!=-1?this.contItems.eq(r):$(),middle:this.contItems.eq(n),after:i!=-1?this.contItems.eq(i):$(),control:this.controlItems.eq(n)},this.trigger("afterSwitch",[n,t])},_onChangeEles:function(t,n,r){function l(){$.each(n,function(e,t){t&&t.removeClass(o),t&&t.removeClass(u)}),n.middle&&n.middle.removeClass(u),$.each(r,function(t,n){n&&n.addClass(o).css(e.css+"transition","none")}),r.middle&&r.middle.addClass(u),r.control&&r.control.addClass(u),a._getElesPosReady(r),a.sliding=!1}var i=this.dirLength,s=this.durationMs,o="active",u=this.currentClassName,a=this,f=this._dir==1?n.after:n.before;f&&(f[0]!=r.middle[0]||this._getTranslateOffset(f)*this._dir<0)&&this._placeTo(r.middle,this._dir*i),this.sliding=!0,n.middle&&n.middle.size()&&n.middle[0].clientLeft,r.middle&&r.middle.size()&&r.middle[0].clientLeft,this._slideTo(n.middle,-this._dir*i,s),this._slideTo(r.middle,0,s,l)},_onChangeAutoplay:function(e,t,n){if(n==t)return;var r=this;n?this.autoplayTimer=setInterval(function(){r.sliding||r.next()},this.autoplayIntervalMs):(clearInterval(this.autoplayTimer),this.autoplayTimer=undefined)},_getElesPosReady:function(e){this._placeTo(e.middle,0),this._placeTo(e.before,-this.dirLength),this._placeTo(e.after,this.dirLength)},_placeTo:function(e,t){if(!e)return;var n=this._getOffsetCss(t);e.css(n)},_slideTo:function(t,n,r,i){n=Math.round(n);if(!t||!t[0])return;var s=t[0].style,o=e.css;if(!s)return;this.slideDir==-1?s.cssText+=o+"transition:"+r+"ms ease;"+o+"transform: translate3d("+n+"px, 0, 0);":s.cssText+=o+"transition:"+r+"ms ease;"+o+"transform: translate3d(0, "+n+"px, 0);",setTimeout(function(){i&&i()},r)},_getOffsetCss:function(e){e=Math.round(e);var t={};return this.slideDir==-1?t[r]="translate3d("+e+"px, 0, 0)":t[r]="translate3d(0, "+e+"px, 0)",t},_getTranslateOffset:function(e){var t=window.getComputedStyle(e[0])[r],n=t.indexOf("3d")>=0,i=t.match(/\((.*)\)/)[1].split(","),s=n?[12,13]:[4,5];return s=this.slideDir==-1?s[0]:s[1],parseInt(i[s])}})}(),n})}.call(window)})();